<!--if not an admin, only include change team and leave team functionality-->
<template name="teamSettingsView">
    {{> topBar}}
    <div id="teamWrapper">
        <div id="teamSettings">
            <h1>Team Settings</h1>

            <div data-role="fieldcontain" id="newMembersWrapper">
                <label class="h2" for="openInviteMember">Members</label>
                <button id="openInviteMember" name="openInviteMember" data-theme="g">Invite a new member to
                    {{currentTeam}}
                </button>

                <div id="inviteMemberPopup" class="ui-content">
                    <h2>New Member</h2>
                    <input type="text" placeholder="email" class="email"/>

                    <div id="memberEmailSuggestion" class="emailSuggestion">Did you mean: <span></span></div>
                    <button id="closeInviteMember" data-theme="y">Cancel</button>
                    <button id="inviteMember" data-theme="g">Invite</button>
                </div>
            </div>

            <div class="tableWrapper">
                {{> membersGrid}}
            </div>

            <br/>

            <div data-role="fieldcontain" id="newTeamWrapper">
                <label class="h2" for="openNewTeamPopup">Team</label>
                <button id="openNewTeamPopup" name="openNewTeamPopup" data-theme="g">Start a new team</button>

                <div id="newTeamPopup" class="ui-content">
                    <h2>New Team</h2>
                    <input type="text" placeholder="name"/>
                    <button id="closeNewTeam" data-theme="y">Cancel</button>
                    <button id="addTeam" data-theme="g">Add</button>
                </div>
            </div>

            <div data-role="fieldcontain" id="currentTeamWrapper">
                <label for="currentTeam">Current Team:</label>
                {{> currentTeamSelect }}
            </div>

            <div data-role="fieldcontain" id="teamNameWrapper">
                <label for="teamName">Team Name:</label>
                <input type="text" name="teamName" id="teamName"/>
            </div>

            <br/>

            <!--TODO: make team name dynamic. ex: "Leave FoundOPS" and "Delete FoundOPS"-->
            <!--TODO: show leave button only if member-->
            <button id="leaveTeam" data-theme="y">Leave this team</button>
            <!--TODO: show delete button only if admin-->
            <button id="deleteTeam" data-theme="y">Delete this team</button>
        </div>
    </div>
</template>

<template name="currentTeamSelect">
    <select name="currentTeam" id="currentTeam">
        {{#each teams}}
        <option value="{{_id}}" {{isCurrentTeamSelected _id}}>{{name}}</option>
        {{/each}}
    </select>
</template>

<template name="membersGrid">
    <table id="membersTable" data-role="table">
        <thead>
        <tr>
            <th>Name</th>
            <th>Email</th>
            <th>Role</th>
            <th>Status</th>
            <th></th>
        </tr>
        </thead>
        <tbody>
        {{#each members}}
        <tr>
            <th class="name">{{name}}</th>
            <td>{{email}}</td>
            <td>
                <label for="memberRole" class="select"></label>
                <select name="memberRole" id="memberRole" data-id="{{id}}">
                    <option value="0">Admin</option>
                    <option value="1">Member</option>
                </select>
            </td>
            <td>
                {{status}}
                {{#if statusIs "Invited"}}
                <a href="">(resend)</a>
                {{/if}}
            </td>
            <td><a href="">Remove</a></td>
        </tr>
        {{/each}}
        </tbody>
    </table>
</template>